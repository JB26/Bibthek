<%
  from lib.variables import VARIABLES
%>
<a class="navmenu-brand visible-md visible-lg" href="/">BibThek</a>
<a class="navmenu-brand">Number of items: ${items_count}</a>
<ul class="nav nav-pills nav-stacked sidebar">

% for idx, name in enumerate(items):
  <li>
    % if name['sub_items']:
      % if active_sort.split('/')[1] == 'series':
        % if 'series_complete' in name['books'][0] and not name['empty_field'] and name['books'][0]['series_complete']:
          <span class="glyphicon glyphicon-star series_star" id="${idx}_star" aria-label="Series complete" title="Series complete"></span>
        % elif  not name['empty_field']:
          <span class="glyphicon glyphicon-star-empty series_star" id="${idx}_star-empty" aria-label="Series not complete" title="Series not complete"></span>
        % endif
      % endif
      <a class="show-toggle" id="${idx}_a">${name['_id']}<span class="caret"></span></a>
      % if active_sort.split('/')[1] in (['series'] + VARIABLES.name_fields):
        % if not name['empty_field']:
          <span class="glyphicon glyphicon-pencil series_pencil" id="${idx}_pencil" aria-label="Edit all" title="Edit all"></span>
        % endif
      % endif
      <ul class="sub_items sub_items_text" id="${idx}_ul" data-name="${name['_id']}">
      % for title in name['books']:
        <li>
          <a href="?book_id=${title['_id']}" class="book_title" id="${title['_id']}" style="margin-left: 0px;" >
            % if 'order_nr' in title and title['order_nr'] != '':
                  ${title['order_nr']} - 
            % endif
                ${title['title']}
          </a>
        </li>
      % endfor
      </ul>
    % else:
      <a href="?book_id=${name['books']['_id']}" class="book_title" id="${name['books']['_id']}" >
        % if 'order_nr' in name and name['order_nr'] != '':
              ${name['order_nr']} - 
        % endif
            ${name['_id']}
      </a>
    % endif
  </li>
% endfor

</ul>
